import{_ as I,o,c as n,b as h,f as j,K as b,U as G,i as H,p as m,m as J,L as Q,r as a,g as u,w as l,a as i,q as g,k as f,t as w,l as _,d as E,F as D,n as W,v as K,h as F,A as X,B as Y}from"../app.49ae5aee.js";import{I as Z}from"./delete.10e7ca34.js";import{I as x}from"./copy.aeeb121f.js";import{I as ee,a as te}from"./hide.16df3df1.js";const oe={},le={t:"1639132000791",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5015",width:"64",height:"64"},se=h("path",{d:"M309.952512 148.95240533a50.331648 50.331648 0 0 1 61.16693332 4.390912L701.94517333 448.49561599a84.91281067 84.91281067 0 0 1 0 126.98692268L371.14129067 870.67852801a50.331648 50.331648 0 0 1-62.76164267 3.27679999c-16.318464-12.058624-19.68264533-34.95253333-7.51479467-51.11808l204.95291734-272.52053333a63.635456 63.635456 0 0 0 0-76.58973867l-204.95291734-272.52053333-1.13595733-1.572864a36.32878933 36.32878933 0 0 1 10.223616-50.659328z","p-id":"5016"},null,-1),ne=[se];function ae(e,s){return o(),n("svg",le,ne)}const ie=I(oe,[["render",ae]]),de={},ce={t:"1641142308318",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4027",width:"64",height:"64"},ue=h("path",{d:"M876.08888853 557.51111147L557.51111147 557.51111147l0 318.57777813c0 25.03111147-20.48 45.51111147-45.51111147 45.51111147s-45.51111147-20.48-45.51111147-45.51111147L466.48888853 557.51111147 147.91111147 557.51111147c-25.03111147 0-45.51111147-20.48-45.51111147-45.51111147 0-25.03111147 20.48-45.51111147 45.51111147-45.51111147l318.57777813 0L466.48888853 147.91111147c0-25.03111147 20.48-45.51111147 45.51111147-45.51111147s45.51111147 20.48 45.51111147 45.51111147l0 318.57777813 318.57777813 0c25.03111147 0 45.51111147 20.48 45.51111147 45.51111147C921.6 537.03111147 901.12 557.51111147 876.08888853 557.51111147z","p-id":"4028"},null,-1),re=[ue];function me(e,s){return o(),n("svg",ce,re)}const he=I(de,[["render",me]]),fe={},pe={t:"1641143491910",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4028",width:"64",height:"64"},be=h("path",{d:"M896 128H128c-25.6 0-42.666667 17.066667-42.666667 42.666667v682.666666c0 25.6 17.066667 42.666667 42.666667 42.666667h768c25.6 0 42.666667-17.066667 42.666667-42.666667V170.666667c0-25.6-17.066667-42.666667-42.666667-42.666667z m-42.666667 682.666667H170.666667V213.333333h682.666666v597.333334z","p-id":"4029"},null,-1),ge=h("path",{d:"M170.666667 469.333333h682.666666v85.333334H170.666667v-85.333334z","p-id":"4030"},null,-1),_e=[be,ge];function ye(e,s){return o(),n("svg",pe,_e)}const ve=I(fe,[["render",ye]]),we={},ke={t:"1641143458555",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4027",width:"64",height:"64"},Ie=h("path",{d:"M853.333333 128H170.666667c-25.6 0-42.666667 17.066667-42.666667 42.666667v682.666666c0 25.6 17.066667 42.666667 42.666667 42.666667h682.666666c25.6 0 42.666667-17.066667 42.666667-42.666667V170.666667c0-25.6-17.066667-42.666667-42.666667-42.666667zM213.333333 810.666667V213.333333h256v597.333334H213.333333z m597.333334 0h-256V213.333333h256v597.333334z","p-id":"4028"},null,-1),$e=[Ie];function Ce(e,s){return o(),n("svg",ke,$e)}const Te=I(we,[["render",Ce]]),Se=j({name:"GFieldCollapse",components:{IconArrowRight:ie,IconPlus:he,IconDelete:Z,IconCopy:x,IconLayoutRow:ve,IconLayoutColumn:Te,IconShow:ee,IconHide:te},props:{mode:{type:String,default:""},label:{type:String,required:!0},tooltip:{type:String},toggle:{type:Boolean,default:!1},modelValue:{type:Boolean,default:!0},defaultLayout:{type:String,default:b.horizontal},features:{type:Array,default:()=>[]},list:Array,min:{type:Number,default:0},max:{type:Number,default:1e3},tab:{type:[String,Function]},addItem:{type:Function,default:()=>{}}},emits:[G],setup(e,s){const k=H([]),y=H(0),P=H(e.defaultLayout===b.horizontal),q=m(()=>k.value.length>0&&e.features.length>0),$=m(()=>e.features.includes(b.horizontal)),d=m(()=>e.features.includes(b.vertical)),C=m(()=>e.features.includes(b.copy)),T=m(()=>e.features.includes(b.add)),p=m(()=>e.features.includes(b.remove)),R=m(()=>($.value||d.value)&&(C.value||T.value||p.value)),S=m(()=>{const t=!e.list||e.list.length<e.min||e.list.length>=e.max;return{disabled:t,msg:t?"不可复制":""}}),L=m(()=>{const t=!e.list||e.list.length>=e.max;return{disabled:t,msg:t?"已至最大项数":""}}),V=m(()=>{const t=!e.list||e.list.length<=e.min;return{disabled:t,msg:t?"已至最小项数":""}}),z=t=>{e.toggle&&!e.modelValue||(k.value=t)},A=t=>{s.emit(G,t)},M=()=>{if(!S.value.disabled){const t=Math.min(y.value,e.list.length-1);e.list.push(Q(e.list[t]))}},B=()=>{if(!V.value.disabled){const t=Math.min(y.value,e.list.length-1);e.list.splice(t,1),y.value=0}},N=()=>{if(!L.value.disabled&&typeof e.addItem=="function"){const t=e.addItem()||{};e.list.push(t)}},c=t=>{const{tab:v,label:O}=e;return typeof v=="function"?v(e.list[t]):(v||O)+(t+1)},r=t=>{y.value=t};return J(()=>e.modelValue,t=>{t||(k.value=[])}),{activeNames:k,activeTab:y,isLayoutRow:P,visibleToolbox:q,showToolboxRow:$,showToolboxCol:d,showToolboxCopy:C,showToolboxAdd:T,showToolboxDel:p,showToolboxSplit:R,copyState:S,addState:L,deleteState:V,handleExpand:z,toggleVisible:A,copyData:M,addData:N,deleteData:B,getTabLabel:c,changeTab:r}}});const Le=e=>(X("data-v-e7cf3fce"),e=e(),Y(),e),Ve={class:"g-field-show-placeholder",style:{width:"auto",position:"absolute",right:"20px"}},De={key:0},Re=["title"],ze=["innerHTML"],Ae=["title"],Me={key:2,class:"g-field-collapse-panel-toolbox"},Be={key:2,class:"g-field-collapse-panel-toolbox-split"},Ne=Le(()=>h("div",{class:"field-before"},null,-1)),He={key:1,class:"g-field-tabs --column"},Ee=["onClick"],Fe={key:1,class:"g-field-collapse-panel-empty"};function Ue(e,s,k,y,P,q){const $=a("IconArrowRight"),d=a("n-icon"),C=a("IconShow"),T=a("IconHide"),p=a("n-tooltip"),R=a("IconLayoutRow"),S=a("IconLayoutColumn"),L=a("IconCopy"),V=a("IconPlus"),z=a("IconDelete"),A=a("n-tab-pane"),M=a("n-tabs"),B=a("n-collapse-item"),N=a("n-collapse");return o(),u(N,{"expanded-names":e.activeNames,"arrow-placement":"left","display-directive":"show",class:_(["g-field-collapse",{"--disabled":e.toggle&&!e.modelValue}]),"onUpdate:expandedNames":e.handleExpand},{arrow:l(()=>[i(d,null,{default:l(()=>[i($)]),_:1})]),default:l(()=>[i(B,{class:"g-field-collapse-panel"},{header:l(()=>[h("i",Ve,[e.toggle?(o(),n("div",De,[e.modelValue?(o(),u(d,{key:0,class:"toolbox-icon",onClick:s[0]||(s[0]=g(c=>e.toggleVisible(!1),["stop"]))},{default:l(()=>[i(C)]),_:1})):(o(),u(d,{key:1,class:"toolbox-icon",onClick:s[1]||(s[1]=g(c=>e.toggleVisible(!0),["stop"]))},{default:l(()=>[i(T)]),_:1}))])):f("",!0)]),e.tooltip?(o(),u(p,{key:0,placement:"top"},{trigger:l(()=>[h("label",{class:"g-field-title-with-description",title:e.label},w(e.label),9,Re)]),default:l(()=>[h("span",{innerHTML:e.tooltip},null,8,ze)]),_:1})):(o(),n("label",{key:1,class:"g-field-title",title:e.label},w(e.label),9,Ae)),e.visibleToolbox?(o(),n("div",Me,[e.showToolboxRow?(o(),u(d,{key:0,class:_(["toolbox-icon",{"--selected":e.isLayoutRow}]),onClick:s[2]||(s[2]=g(c=>e.isLayoutRow=!0,["stop"]))},{default:l(()=>[i(R)]),_:1},8,["class"])):f("",!0),e.showToolboxCol?(o(),u(d,{key:1,class:_(["toolbox-icon",{"--selected":!e.isLayoutRow}]),onClick:s[3]||(s[3]=g(c=>e.isLayoutRow=!1,["stop"]))},{default:l(()=>[i(S)]),_:1},8,["class"])):f("",!0),e.showToolboxSplit?(o(),n("span",Be)):f("",!0),e.showToolboxCopy?(o(),u(p,{key:3,placement:"top",disabled:!e.copyState.disabled},{trigger:l(()=>[i(d,{class:_(["toolbox-icon",{"--disabled":e.copyState.disabled}]),onClick:g(e.copyData,["stop"])},{default:l(()=>[i(L)]),_:1},8,["class","onClick"])]),default:l(()=>[E(" "+w(e.copyState.msg),1)]),_:1},8,["disabled"])):f("",!0),e.showToolboxAdd?(o(),u(p,{key:4,placement:"top",disabled:!e.addState.disabled},{trigger:l(()=>[i(d,{class:_(["toolbox-icon --icon-add",{"--disabled":e.addState.disabled}]),onClick:g(e.addData,["stop"])},{default:l(()=>[i(V)]),_:1},8,["class","onClick"])]),default:l(()=>[E(" "+w(e.addState.msg),1)]),_:1},8,["disabled"])):f("",!0),e.showToolboxDel?(o(),u(p,{key:5,placement:"top",disabled:!e.deleteState.disabled},{trigger:l(()=>[i(d,{class:_(["toolbox-icon",{"--disabled":e.deleteState.disabled}]),onClick:g(e.deleteData,["stop"])},{default:l(()=>[i(z)]),_:1},8,["class","onClick"])]),default:l(()=>[E(" "+w(e.deleteState.msg),1)]),_:1},8,["disabled"])):f("",!0)])):f("",!0)]),default:l(()=>[Ne,e.mode==="layout"?(o(),n(D,{key:0},[e.list&&e.list.length>0?(o(),n(D,{key:0},[e.isLayoutRow?(o(),u(M,{key:0,value:e.activeTab,"onUpdate:value":s[4]||(s[4]=c=>e.activeTab=c),type:"card",class:"g-field-tabs",style:W({"--datav-gui-tabs-card-num":e.max})},{default:l(()=>[(o(!0),n(D,null,K(e.list,(c,r)=>(o(),u(A,{key:r,name:r,tab:e.getTabLabel(r)},{default:l(()=>[F(e.$slots,"default",{item:c},void 0,!0)]),_:2},1032,["name","tab"]))),128))]),_:3},8,["value","style"])):(o(),n("div",He,[(o(!0),n(D,null,K(e.list,(c,r)=>(o(),n("div",{key:r,class:"g-field-tabs-column-item"},[h("span",{class:_(["g-field-tabs-column-item-head",{"--selected":r===e.activeTab}]),onClick:t=>e.changeTab(r)},w(e.getTabLabel(r)),11,Ee),F(e.$slots,"default",{item:c},void 0,!0)]))),128))]))],64)):(o(),n("span",Fe," 列表为空 "))],64)):F(e.$slots,"default",{key:1},void 0,!0)]),_:3})]),_:3},8,["expanded-names","class","onUpdate:expandedNames"])}const U=I(Se,[["render",Ue],["__scopeId","data-v-e7cf3fce"]]);U.install=e=>{e.component(U.name,U)};export{U as default};
